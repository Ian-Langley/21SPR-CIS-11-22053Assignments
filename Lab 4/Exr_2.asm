; p => x3200
; q => x3201
; r => x3202
; if P-Q > 0, add 2 to R
; if P-Q < 0, subtract 1 from R
; if P-Q = 0, add 1 t R
; Lables in subsequent from x3200


.ORIG x3000



;CLEAR VALUES
AND R1, R1, x0	;clear r1
AND R2, R2, X0	;CLEAR R2
AND R3, R3, x0	;CLEAR R3
AND R4, R4, x0	;CLEAR R4
AND R5, R5, X0	;CLEAR R5

;LOAD P/Q
LDI R1, P	;LOAD P
LDI R2, Q	;LOAD Q
;NEGATE Q TO 2'S
NOT R2, R2	;NOT Q, 1'S COMP
ADD R2, R2, X1	;2'S COMP
;LOAD r
LDI R3, RES	;LOAD RES TO R3
;STORE P-Q TO R4
ADD R4, R1, R2	;ADD R1+R2 TO R3 (P-Q)
;BRANCH
BRp POS		;P-Q > 0 =>	POS
BRn NEG		;P-Q < 0 =>	NEG
BRz EQUAL	;    = 0 =>	EQUAL


POS 		;LABLE
ADD R3, R3, X2	;	ADD 2 TO RESULT
STI R3, RES	;	STORE R3 TO RES LABLE
HALT

NEG 		;LABLE
AND R5, R5, X0	; 	CLEAR R4
ADD R5, R5, X1	;	ADD 1
NOT R5, R5	;	NOT R4 TO R4
ADD R5, R5, X1	;	2'S COMP
ADD R3, R5, R3	;	SUBTRACT 1
STI R3, RES	;	STORE R3 TO RES LABLE
HALT

EQUAL		;LABLE
ADD R3, R3, X1	;	ADD 1 TO RESULT
STI R3, RES	;	STORE R3 TO RES LABLE
HALT


P	.FILL X3200
Q	.FILL X3201
RES	.FILL X3202

.END
